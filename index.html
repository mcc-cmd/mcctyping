<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MCCNETWORLD – 미리보기</title>
<style>
  :root{--bg:#f6f8fb;--card:#ffffff;--line:#e5e9f2;--fg:#0b1220}
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--fg);font:15px/1.6 system-ui,"Noto Sans KR",sans-serif}
  .wrap{max-width:1200px;margin:0 auto;padding:18px}
  .panel{background:var(--card);border:1px solid var(--line);border-radius:16px;overflow:hidden;box-shadow:0 10px 30px rgba(16,24,40,.04)}
  .hd{display:flex;align-items:center;justify-content:center;padding:14px 16px;border-bottom:1px solid var(--line)}
  .hd strong{font-weight:900;letter-spacing:.2px}
  .stack{padding:20px}
  .section-title{font-weight:900;margin:0 0 12px 2px;font-size:16px}
  .brand-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px;margin:6px 0 20px}
  .brand{position:relative;border-radius:18px;cursor:pointer;isolation:isolate;transition:transform .08s ease, box-shadow .15s ease, border-color .15s ease;border:1px solid var(--line);background:linear-gradient(180deg,#fff,#fafcff)}
  .brand:hover{transform:translateY(-1px);box-shadow:0 8px 24px rgba(2,6,23,.08)}
  .brand .logo{display:flex;align-items:center;gap:14px;padding:22px 22px 12px 22px;min-height:96px}
  .brand .logo .mark{width:64px;height:64px;border-radius:16px;display:grid;place-items:center;font-weight:900;background:var(--chip-bg);color:var(--chip-fg);border:2px solid var(--chip-bd)}
  .brand .logo .name{font-size:22px;font-weight:900;letter-spacing:.2px}
  .brand .cap{padding:0 18px 18px 18px;color:#475467;font-size:12px}
  .brand .ribbon{position:absolute;right:12px;top:12px;font-size:11px;font-weight:800;padding:5px 10px;border-radius:999px;background:var(--ribbon-bg);color:var(--ribbon-fg);border:1px solid #d0d5dd}
  .brand .tag{position:absolute;left:12px;top:12px;font-size:11px;font-weight:800;padding:5px 10px;border-radius:999px;border:1px solid #d0d5dd}
  .tag-change{background:#ecfeff;color:#0e7490;border-color:#a5f3fc}
  .tag-cancel{background:#fff7ed;color:#9a3412;border-color:#fed7aa}
  .theme-um{--chip-bg:#f3e8ff;--chip-fg:#3b0764;--chip-bd:#8b5cf6;--ribbon-bg:#ede9fe;--ribbon-fg:#5b21b6}
  .theme-mm{--chip-bg:#e0f2fe;--chip-fg:#0b4a6f;--chip-bd:#38bdf8;--ribbon-bg:#e0f2fe;--ribbon-fg:#0c4a6e}
  .theme-s7{--chip-bg:#d1fae5;--chip-fg:#064e3b;--chip-bd:#10b981;--ribbon-bg:#ecfdf5;--ribbon-fg:#065f46}
  .theme-pr{--chip-bg:#dbeafe;--chip-fg:#1e40af;--chip-bd:#60a5fa;--ribbon-bg:#eef2ff;--ribbon-fg:#1d4ed8}
  .tabs{display:flex;gap:8px;margin-bottom:12px}
  .tab-btn{padding:8px 16px;border-radius:999px;border:1px solid var(--line);background:#fff;cursor:pointer}
  .tab-btn.active{background:#111827;color:#fff;border-color:#111827}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel">
      <div class="hd"><strong>MCCNETWORLD</strong></div>
      <div class="stack">
        <!-- 가입 서류 -->
        <div class="section-title">가입 서류</div>
        <div id="joinTabs">
          <div class="tabs">
            <button class="tab-btn active" data-target="adult">성인</button>
            <button class="tab-btn" data-target="teen">청소년</button>
          </div>
          <div class="brand-grid" id="joinTabsList"></div>
        </div>

        <!-- 변경 서류 -->
        <div class="section-title" style="margin-top:8px">변경 서류</div>
        <div id="changeTabs">
          <div class="tabs">
            <button class="tab-btn active" data-target="uplus">LG U+</button>
            <button class="tab-btn" data-target="kt">KT</button>
            <button class="tab-btn" data-target="sk">SKT</button>
          </div>
          <div class="brand-grid" id="changeTabsList"></div>
        </div>

        <!-- 해지 서류 -->
        <div class="section-title" style="margin-top:16px">해지 서류</div>
        <div id="cancelTabs">
          <div class="tabs">
            <button class="tab-btn active" data-target="uplus">LG U+</button>
            <button class="tab-btn" data-target="kt">KT</button>
            <button class="tab-btn" data-target="sk">SKT</button>
          </div>
          <div class="brand-grid" id="cancelTabsList"></div>
        </div>
      </div>
    </section>
  </div>

<script>
/* ---------------- 공통 브랜드 마스터(2번 방식) ---------------- */
const BRANDS = [
  {carrier:'uplus', theme:'theme-um', mark:'U+',     name:'미디어로그',   cap:'유모바일'},
  {carrier:'uplus', theme:'theme-pr', mark:'프리-LG', name:'프리티LG',     cap:'프리티LG'},
  {carrier:'uplus', theme:'theme-um', mark:'HEL',    name:'헬로LG',       cap:'헬로모바일'},

  {carrier:'kt',    theme:'theme-mm', mark:'M',      name:'엠모바일',     cap:'KT엠모바일'},
  {carrier:'kt',    theme:'theme-mm', mark:'S5',     name:'스테이지파이브', cap:'KT/SKT 공통 스테이지파이브'},
  {carrier:'kt',    theme:'theme-mm', mark:'스카이',  name:'스카이라이프', cap:'스카이라이프'},

  {carrier:'sk',    theme:'theme-pr', mark:'프리-SK', name:'프리티SK',     cap:'프리티SK'},
  {carrier:'sk',    theme:'theme-s7', mark:'텔링크',  name:'SK텔링크',     cap:'SK텔링크'}
];

/* 가입 / 변경 / 해지용 데이터 자동 생성 */
const JOIN_DATA = {
  adult: BRANDS.map(b => ({...b, doc:'join', age:'adult'})),
  teen : BRANDS.map(b => ({
    ...b,
    name: b.name + '',
    doc :'join',
    age :'teen'
  }))
};

const CHANGE_CARDS = BRANDS.map(b => ({
  ...b,
  doc :'change',
  tag :'변경'
}));

const CANCEL_CARDS = BRANDS.map(b => ({
  ...b,
  doc :'cancel',
  tag :'해지',
  tagClass:'tag-cancel'
}));

/* ---------------- 라우팅 ---------------- */
const BRAND_ROUTE = {
  '미디어로그':     { carrier:'uplus', brand:'umobile'   },
  '프리티LG':       { carrier:'uplus', brand:'freeT'     },
  '헬로LG':         { carrier:'uplus', brand:'hello'     },
  '엠모바일':       { carrier:'kt',    brand:'mmobile'   },
  '스카이라이프':   { carrier:'kt',    brand:'skylife'   },
  '스테이지파이브': { carrier:'kt',    brand:'stagefive' },
  '프리티SK':       { carrier:'sk',    brand:'freeT-sk'  },
  'SK텔링크':       { external: 'https://smvno.sk7mobile.com/main.do' }
};

function buildBrandUrl(route, doc, age){
  // 외부 링크거나 carrier/brand 가 없으면 그냥 종료
  if (!route || !route.carrier || !route.brand) return '#';

  // http-server 루트가 public 이므로 /brands 로 시작
  const base = `/brands/${route.carrier}/${route.brand}/index.html`;
  const abs  = new URL(base, location.href).href;

  const qs = new URLSearchParams();
  qs.set('mode','fill');
  qs.set('doc', doc || 'join');
  if ((doc || 'join') === 'join') qs.set('age', age || 'adult');

  return `${abs}?${qs.toString()}`;
}

/* ---------------- 렌더/바인딩 ---------------- */
function card({theme, mark, name, cap, tag, tagClass, carrier, doc, age}){
  const tagHtml = tag ? `<span class="tag ${tagClass||'tag-change'}">${tag}</span>` : '';
  const badge = (carrier==='uplus'?'U+':carrier==='kt'?'KT':carrier==='sk'?'SKT':'MVNO');
  const dataName = name.replace(/\(청소년\)/,'');
  const docAttr  = doc || 'join';
  const ageAttr  = (docAttr==='join' && age) ? ` data-age="${age}"` : '';
  return `<div class="brand ${theme}" data-name="${dataName}" data-doc="${docAttr}"${ageAttr}>
            ${tagHtml}
            <span class="ribbon">${badge}</span>
            <div class="logo"><div class="mark">${mark}</div><div class="name">${name}</div></div>
            <div class="cap">${cap}</div>
          </div>`;
}

function attachNavigateHandlers(scope){
  scope.querySelectorAll('.brand').forEach(cardEl=>{
    cardEl.addEventListener('click', ()=>{
      const nm  = cardEl.getAttribute('data-name')||'';
      const doc = cardEl.getAttribute('data-doc')||'join';
      const age = cardEl.getAttribute('data-age')||'';

      const route = BRAND_ROUTE[nm];
      if (!route) {
        console.warn('[route] 매핑 없음:', nm);
        return;
      }

      // ★ SK텔링크처럼 외부 URL 이 있는 경우: 바로 그쪽으로 이동
      if (route.external) {
        location.href = route.external;
        return;
      }

      // ★ 나머지는 기존 폼 URL
      const url = buildBrandUrl(route, doc, age);
      if (url !== '#') location.href = url;
    });
  });
}

function safeRender(listEl, items){
  try{
    listEl.innerHTML = (items && items.length ? items.map(card).join('') : '<div style="opacity:.6">자료 없음</div>');
    attachNavigateHandlers(listEl);
  }catch(err){
    console.error('[render error]', err);
    listEl.innerHTML = '<div style="color:#b91c1c;font-weight:800">렌더 오류 – 콘솔을 확인하세요.</div>';
  }
}

function wireKindTabs(containerId, listId, dataObj){
  const container = document.getElementById(containerId);
  const list = document.getElementById(listId);
  container.querySelectorAll('.tab-btn').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      container.querySelectorAll('.tab-btn').forEach(x=>x.classList.remove('active'));
      btn.classList.add('active');
      const kind = btn.dataset.target; // adult | teen
      safeRender(list, (dataObj||{})[kind] || []);
    });
  });
  container.querySelector('.tab-btn.active').click();
}

function wireTabs(containerId, listId, data){
  const container = document.getElementById(containerId);
  const list = document.getElementById(listId);
  container.querySelectorAll('.tab-btn').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      container.querySelectorAll('.tab-btn').forEach(x=>x.classList.remove('active'));
      btn.classList.add('active');
      const target = btn.dataset.target; // uplus | kt | sk
      const items = (data||[]).filter(d=>d.carrier===target);
      safeRender(list, items);
    });
  });
  container.querySelector('.tab-btn.active').click();
}

/* DOM 준비 후 실행 */
window.addEventListener('DOMContentLoaded', ()=>{
  wireKindTabs('joinTabs','joinTabsList',JOIN_DATA);
  wireTabs('changeTabs','changeTabsList',CHANGE_CARDS);
  wireTabs('cancelTabs','cancelTabsList',CANCEL_CARDS);
});
</script>
</body>
</html>
